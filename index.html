<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>手繪風格餐廳地圖 - 延吉街美食 (含Google地圖連結)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'ZCOOL KuaiLe', cursive, '微軟正黑體', sans-serif;
            background-color: #f0f0e0; /* 淺米色背景 */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            color: #4a3b31; /* 深棕色文字 */
        }
        #map-title {
            font-size: 2.5rem;
            color: #8B4513; /* 鞍褐色 */
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 1px 1px #fff;
        }
        #map-container {
            width: 100%;
            max-width: 800px;
            height: 600px;
            background-color: #fffaf0; /* 亞麻色背景，像紙張 */
            border: 3px solid #8B4513; /* 棕色邊框 */
            border-radius: 15px 25px 15px 20px / 20px 15px 25px 15px; /* 不規則圓角 */
            box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .restaurant-marker {
            position: absolute;
            background-color: #FFDEAD; /* Navajo White - 標籤背景色 */
            border: 2px solid #D2691E; /* 巧克力色邊框 */
            padding: 7px 10px;
            border-radius: 20px 10px 15px 8px / 10px 18px 8px 12px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            font-size: 0.8rem;
            text-align: center;
            white-space: nowrap;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .restaurant-marker:hover {
            transform: scale(1.1) rotate(-2deg);
            box-shadow: 4px 4px 8px rgba(0,0,0,0.25);
            z-index: 10;
            overflow: visible;
            white-space: normal;
        }
        .center-marker {
            background-color: #FF7F50; /* 珊瑚色 - 中心點標籤 */
            color: white;
            border-color: #A0522D; /* 黃褐色 */
            font-weight: bold;
            font-size: 0.9rem;
        }
        .road {
            position: absolute;
            background-color: #D3D3D3;
            border-radius: 5px;
            opacity: 0.7;
        }
        #yanji-street {
            width: 18px;
            height: 100%;
            left: 48%;
            top: 0;
            transform: translateX(-50%) rotate(5deg);
        }
        #renai-road {
            width: 100%;
            height: 18px;
            top: 38%;
            left: 0;
            transform: translateY(-50%) rotate(-3deg);
        }
         #guangfu-road {
            width: 15px;
            height: 100%;
            left: 75%;
            top: 0;
            transform: translateX(-50%) rotate(2deg);
            opacity: 0.6;
        }
        #info-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #FFF8DC;
            border: 3px solid #8B4513;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            z-index: 100;
            width: 90%;
            max-width: 450px; /* 稍微加寬以容納連結 */
            text-align: left;
        }
        #info-popup h3 {
            font-size: 1.5rem;
            color: #8B4513;
            margin-bottom: 10px;
        }
        #info-popup p {
            font-size: 0.95rem;
            margin-bottom: 5px;
            line-height: 1.4;
        }
        #info-popup strong {
            color: #A0522D;
        }
        #popup-gmap-link {
            display: inline-block;
            margin-top: 10px;
            padding: 6px 12px;
            background-color: #4CAF50; /* 綠色按鈕 */
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        #popup-gmap-link:hover {
            background-color: #45a049;
        }
        #close-popup {
            display: block;
            margin: 20px auto 0; /* 增加與地圖連結的間距 */
            padding: 8px 15px;
            background-color: #CD853F;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
        }
        #close-popup:hover {
            background-color: #A0522D;
        }

        @media (max-width: 768px) {
            #map-title { font-size: 2rem; }
            #map-container { height: 500px; }
            .restaurant-marker { font-size: 0.7rem; padding: 5px 8px; }
            .center-marker { font-size: 0.8rem; }
        }
        @media (max-width: 480px) {
             #map-container { height: 450px; }
            .restaurant-marker { font-size: 0.65rem; padding: 4px 6px; max-width: 90px; }
             .center-marker { font-size: 0.75rem; }
            #info-popup { padding: 15px; max-width: 300px; }
            #info-popup h3 { font-size: 1.2rem; }
            #info-popup p { font-size: 0.85rem; }
            #popup-gmap-link { font-size: 0.8rem; padding: 5px 10px; }
        }
    </style>
</head>
<body>

    <h1 id="map-title">延吉街周邊美食地圖 (含Google地圖連結)</h1>

    <div id="map-container">
        <div class="road" id="yanji-street"></div>
        <div class="road" id="renai-road"></div>
        <div class="road" id="guangfu-road"></div>
    </div>

    <div id="info-popup" style="display:none;">
        <h3 id="popup-name"></h3>
        <p><strong>類型：</strong> <span id="popup-type"></span></p>
        <p><strong>地址：</strong> <span id="popup-address"></span></p>
        <p><strong>電話：</strong> <span id="popup-phone"></span></p>
        <p><strong>距離中心點：</strong> <span id="popup-distance"></span></p>
        <p><strong>評分：</strong> <span id="popup-rating"></span></p>
        <a id="popup-gmap-link" href="#" target="_blank">在 Google 地圖上查看</a>
        <button id="close-popup">關閉</button>
    </div>

    <script>
        const restaurants = [
            {
                id: 'shiyun',
                name: '世運食品-延吉店',
                type: '食品材料',
                address: '106 台灣台北市大安區延吉街232之3號',
                phone: '02-2325-0368',
                distance: '中心點',
                rating: 'N/A',
                isCenter: true,
                position: { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('世運食品 台北市大安區延吉街232之3號')}`
            },
            {
                id: 'zhanjun',
                name: '展峻小吃店',
                type: '台灣小吃',
                address: '106台灣台北市大安區仁愛路四段300巷22號',
                phone: '0933-300-433',
                distance: '約 120 公尺',
                rating: '4.5 ★',
                position: { top: '38%', left: '35%', transform: 'translate(-50%, -50%) rotate(3deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('展峻小吃店 台北市大安區仁愛路四段300巷22號')}`
            },
            {
                id: 'sugarpea',
                name: 'SUGAR PEA',
                type: '咖啡廳 / 西式簡餐',
                address: '106台灣台北市大安區仁愛路四段300巷20弄16號1樓',
                phone: '02-2325-6188',
                distance: '約 200 公尺',
                rating: '4.4 ★',
                position: { top: '30%', left: '65%', transform: 'translate(-50%, -50%) rotate(-4deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('SUGAR PEA CAFE KITCHEN 台北市大安區仁愛路四段300巷20弄16號')}`
            },
            {
                id: 'dading',
                name: '大鼎豬血湯',
                type: '台灣小吃',
                address: '106台灣台北市大安區延吉街249號',
                phone: '02-2706-3088',
                distance: '約 200 公尺',
                rating: '4.0 ★',
                position: { top: '62%', left: '30%', transform: 'translate(-50%, -50%) rotate(-2deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('大鼎豬血湯 台北延吉店')}`
            },
            {
                id: 'harbor106',
                name: '106HARBOR',
                type: '美式海鮮',
                address: '106台灣台北市大安區安和路一段127巷29弄13號1樓',
                phone: '02-2709-7868',
                distance: '約 220 公尺',
                rating: '4.9 ★',
                position: { top: '70%', left: '68%', transform: 'translate(-50%, -50%) rotate(5deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('106HARBOR美式海鮮餐廳 台北市大安區安和路一段127巷29弄13號')}`
            },
            {
                id: 'beida',
                name: '北大行小籠包',
                type: '中式麵點 / 小籠包',
                address: '110台灣台北市信義區光復南路427號',
                phone: '02-2729-9370',
                distance: '約 240 公尺',
                rating: '4.3 ★',
                position: { top: '18%', left: '55%', transform: 'translate(-50%, -50%) rotate(2deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('北大行小籠包 台北市信義區光復南路427號')}`
            },
            {
                id: 'zhousifu',
                name: '粥師傅',
                type: '粥品 / 鍋燒麵',
                address: '106台灣台北市大安區延吉街153之10號',
                phone: '02-2775-2236',
                distance: '約 350 公尺',
                rating: '4.1 ★',
                position: { top: '85%', left: '45%', transform: 'translate(-50%, -50%) rotate(-3deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('粥師傅廣東粥鍋燒意麵延吉店')}`
            },
            {
                id: 'ramen',
                name: '鷹流深夜拉麵',
                type: '日式拉麵',
                address: '105台灣台北市松山區延吉街2號',
                phone: 'N/A',
                distance: '約 400 公尺',
                rating: '4.1 ★',
                position: { top: '45%', left: '15%', transform: 'translate(-50%, -50%) rotate(4deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('鷹流東京醬油拉麵蘭丸 台北市松山區延吉街2號')}`
            },
            {
                id: 'zhuanweixiang',
                name: '饌味香鍋貼',
                type: '中式麵點 / 鍋貼',
                address: '106台灣台北市大安區忠孝東路四段216巷32弄1號',
                phone: '02-2721-2580',
                distance: '約 450 公尺',
                rating: '3.3 ★',
                position: { top: '25%', left: '85%', transform: 'translate(-50%, -50%) rotate(-5deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('饌味香鍋貼麵食館 台北市大安區忠孝東路四段216巷32弄1號')}`
            },
            {
                id: 'ohsoymilk',
                name: '老漿家',
                type: '豆漿 / 中式早餐',
                address: '106台灣台北市大安區延吉街110號1F',
                phone: '02-2779-0602',
                distance: '約 450 公尺',
                rating: '4.4 ★',
                position: { top: '15%', left: '20%', transform: 'translate(-50%, -50%) rotate(6deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('老漿家OHsoymilk 台北延吉店')}`
            },
            {
                id: 'greenhouse',
                name: 'GreenHouse',
                type: '早午餐 / 異國料理',
                address: '110台灣台北市信義區信義路四段395巷6弄8號1樓',
                phone: '0909-118-182',
                distance: '約 500 公尺',
                rating: '4.2 ★',
                position: { top: '80%', left: '80%', transform: 'translate(-50%, -50%) rotate(1deg)' },
                googleMapUrl: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent('GreenHouse早午餐 台北市信義區信義路四段395巷6弄8號')}`
            }
        ];

        const mapContainer = document.getElementById('map-container');
        const infoPopup = document.getElementById('info-popup');
        const popupName = document.getElementById('popup-name');
        const popupType = document.getElementById('popup-type');
        const popupAddress = document.getElementById('popup-address');
        const popupPhone = document.getElementById('popup-phone');
        const popupDistance = document.getElementById('popup-distance');
        const popupRating = document.getElementById('popup-rating');
        const popupGmapLink = document.getElementById('popup-gmap-link'); // 取得地圖連結元素
        const closePopupButton = document.getElementById('close-popup');

        restaurants.forEach(restaurant => {
            const marker = document.createElement('div');
            marker.classList.add('restaurant-marker');
            if (restaurant.isCenter) {
                marker.classList.add('center-marker');
            }
            marker.id = restaurant.id;
            marker.textContent = restaurant.name;
            marker.title = restaurant.name;

            marker.style.top = restaurant.position.top;
            marker.style.left = restaurant.position.left;
            marker.style.transform = restaurant.position.transform || 'translate(-50%, -50%)';
            
            marker.addEventListener('click', () => {
                popupName.textContent = restaurant.name;
                popupType.textContent = restaurant.type;
                popupAddress.textContent = restaurant.address;
                popupPhone.textContent = restaurant.phone || '無提供';
                popupDistance.textContent = restaurant.distance;
                popupRating.textContent = restaurant.rating;
                popupGmapLink.href = restaurant.googleMapUrl; // 設定地圖連結的 URL
                infoPopup.style.display = 'block';
            });
            mapContainer.appendChild(marker);
        });

        closePopupButton.addEventListener('click', () => {
            infoPopup.style.display = 'none';
        });
    </script>
</body>
</html>